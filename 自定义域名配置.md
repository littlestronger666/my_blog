# è‡ªå®šä¹‰åŸŸåé…ç½®æŒ‡å—

## ğŸ“‹ å½“å‰çŠ¶æ€

ä½ æ­£åœ¨ä½¿ç”¨è‡ªå®šä¹‰åŸŸåéƒ¨ç½²ï¼Œè¿™æ˜¯æ­£ç¡®çš„é…ç½®æ–¹å¼ã€‚

## âœ… å·²å®Œæˆçš„é…ç½®

1. âœ… `next.config.ts` - `REPO_NAME` è®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²
2. âœ… `public/CNAME` - å·²åˆ›å»ºï¼ˆéœ€è¦æ›´æ–°ä¸ºä½ çš„åŸŸåï¼‰

## ğŸ”§ éœ€è¦å®Œæˆçš„é…ç½®

### æ­¥éª¤ 1: æ›´æ–° CNAME æ–‡ä»¶

æ‰“å¼€ `public/CNAME` æ–‡ä»¶ï¼Œå°†å†…å®¹æ”¹ä¸ºä½ çš„å®é™…åŸŸåï¼š

```
yourdomain.com
```

**ç¤ºä¾‹ï¼š**
- å¦‚æœä½ çš„åŸŸåæ˜¯ `blog.example.com`ï¼Œå°±å†™ï¼š`blog.example.com`
- å¦‚æœä½ çš„åŸŸåæ˜¯ `example.com`ï¼Œå°±å†™ï¼š`example.com`

**æ³¨æ„ï¼š**
- ä¸è¦åŒ…å« `https://`
- ä¸è¦åŒ…å« `www.`ï¼ˆé™¤éä½ çš„åŸŸåå°±æ˜¯ www å¼€å¤´ï¼‰
- åªå†™åŸŸåæœ¬èº«

### æ­¥éª¤ 2: è§£å†³ Git æ¨é€é—®é¢˜

ç”±äºè¿œç¨‹ä»“åº“æœ‰æœ¬åœ°æ²¡æœ‰çš„æ›´æ”¹ï¼Œéœ€è¦å…ˆæ‹‰å–ï¼š

```bash
# æ‹‰å–è¿œç¨‹æ›´æ”¹
git pull origin main --rebase

# å¦‚æœæç¤ºå†²çªï¼Œè§£å†³åç»§ç»­
# git add .
# git rebase --continue

# æ¨é€
git push origin main
```

**å¦‚æœä¸»åˆ†æ”¯æ˜¯ masterï¼š**
```bash
git pull origin master --rebase
git push origin master
```

### æ­¥éª¤ 3: é…ç½® DNS

åœ¨ä½ çš„åŸŸåæä¾›å•†ï¼ˆå¦‚é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€Cloudflareï¼‰é…ç½® DNSï¼š

#### æ–¹æ¡ˆ A: ä½¿ç”¨ A è®°å½•ï¼ˆæ¨èï¼‰

æ·»åŠ ä»¥ä¸‹ A è®°å½•ï¼š

```
ç±»å‹: A
ä¸»æœºè®°å½•: @ï¼ˆæˆ–ç•™ç©ºï¼‰
è®°å½•å€¼: 185.199.108.153
```

```
ç±»å‹: A
ä¸»æœºè®°å½•: @ï¼ˆæˆ–ç•™ç©ºï¼‰
è®°å½•å€¼: 185.199.109.153
```

```
ç±»å‹: A
ä¸»æœºè®°å½•: @ï¼ˆæˆ–ç•™ç©ºï¼‰
è®°å½•å€¼: 185.199.110.153
```

```
ç±»å‹: A
ä¸»æœºè®°å½•: @ï¼ˆæˆ–ç•™ç©ºï¼‰
è®°å½•å€¼: 185.199.111.153
```

#### æ–¹æ¡ˆ B: ä½¿ç”¨ CNAME è®°å½•ï¼ˆå­åŸŸåï¼‰

å¦‚æœä½ ä½¿ç”¨å­åŸŸåï¼ˆå¦‚ blog.example.comï¼‰ï¼š

```
ç±»å‹: CNAME
ä¸»æœºè®°å½•: blog
è®°å½•å€¼: littlestronger666.github.io
```

### æ­¥éª¤ 4: åœ¨ GitHub é…ç½®è‡ªå®šä¹‰åŸŸå

1. è¿›å…¥ä½ çš„ GitHub ä»“åº“
2. ç‚¹å‡» **Settings**
3. ç‚¹å‡»å·¦ä¾§ **Pages**
4. åœ¨ **Custom domain** è¾“å…¥ä½ çš„åŸŸå
5. ç‚¹å‡» **Save**
6. ç­‰å¾… DNS æ£€æŸ¥é€šè¿‡ï¼ˆå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿåˆ°å‡ å°æ—¶ï¼‰
7. å‹¾é€‰ **Enforce HTTPS**

## ğŸ¯ å®Œæ•´æ“ä½œæµç¨‹

### 1. æ›´æ–° CNAME æ–‡ä»¶

```bash
# ç¼–è¾‘ public/CNAME æ–‡ä»¶ï¼Œå†™å…¥ä½ çš„åŸŸå
echo "yourdomain.com" > public/CNAME
```

### 2. æ‹‰å–è¿œç¨‹æ›´æ”¹

```bash
git pull origin main --rebase
```

### 3. æäº¤æ›´æ”¹

```bash
git add .
git commit -m "Add custom domain configuration"
```

### 4. æ¨é€

```bash
git push origin main
```

### 5. ç­‰å¾…éƒ¨ç½²

- GitHub Actions ä¼šè‡ªåŠ¨æ„å»ºï¼ˆ2-3 åˆ†é’Ÿï¼‰
- DNS ç”Ÿæ•ˆå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿåˆ°å‡ å°æ—¶

### 6. éªŒè¯

è®¿é—®ä½ çš„è‡ªå®šä¹‰åŸŸåï¼Œæ£€æŸ¥ï¼š
- [ ] ç½‘ç«™å¯ä»¥è®¿é—®
- [ ] æ ·å¼æ­£å¸¸æ˜¾ç¤º
- [ ] HTTPS æ­£å¸¸å·¥ä½œ
- [ ] æ‰€æœ‰é“¾æ¥æ­£å¸¸

## ğŸ“ é…ç½®æ£€æŸ¥æ¸…å•

### Next.js é…ç½®
- [ ] `next.config.ts` ä¸­ `REPO_NAME = ''`
- [ ] æ„å»ºæˆåŠŸï¼š`npm run build`

### CNAME æ–‡ä»¶
- [ ] `public/CNAME` æ–‡ä»¶å­˜åœ¨
- [ ] å†…å®¹æ˜¯ä½ çš„åŸŸåï¼ˆä¸å« https://ï¼‰

### DNS é…ç½®
- [ ] A è®°å½•æˆ– CNAME è®°å½•å·²æ·»åŠ 
- [ ] DNS å·²ç”Ÿæ•ˆï¼ˆå¯ç”¨ `nslookup yourdomain.com` æ£€æŸ¥ï¼‰

### GitHub Pages è®¾ç½®
- [ ] Custom domain å·²è®¾ç½®
- [ ] DNS æ£€æŸ¥é€šè¿‡
- [ ] Enforce HTTPS å·²å¯ç”¨

### Git ä»“åº“
- [ ] ä»£ç å·²æ¨é€åˆ° GitHub
- [ ] GitHub Actions æ„å»ºæˆåŠŸ
- [ ] æ²¡æœ‰æ¨é€é”™è¯¯

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: DNS æ£€æŸ¥å¤±è´¥
**åŸå› ï¼š** DNS è¿˜æ²¡ç”Ÿæ•ˆ
**è§£å†³ï¼š** ç­‰å¾…å‡ åˆ†é’Ÿåˆ°å‡ å°æ—¶ï¼ŒDNS ç”Ÿæ•ˆéœ€è¦æ—¶é—´

### Q2: ç½‘ç«™æ˜¾ç¤º 404
**åŸå› ï¼š** GitHub Pages è¿˜æ²¡éƒ¨ç½²å®Œæˆ
**è§£å†³ï¼š** ç­‰å¾… GitHub Actions å®Œæˆï¼ŒæŸ¥çœ‹ Actions æ ‡ç­¾

### Q3: æ ·å¼ä¸¢å¤±
**åŸå› ï¼š** `REPO_NAME` é…ç½®é”™è¯¯
**è§£å†³ï¼š** ç¡®è®¤ `REPO_NAME = ''`ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰

### Q4: HTTPS ä¸å·¥ä½œ
**åŸå› ï¼š** éœ€è¦ç­‰å¾… GitHub ç”Ÿæˆè¯ä¹¦
**è§£å†³ï¼š** ç­‰å¾…å‡ åˆ†é’Ÿï¼Œç„¶åå‹¾é€‰ Enforce HTTPS

### Q5: Git æ¨é€è¢«æ‹’ç»
**åŸå› ï¼š** è¿œç¨‹æœ‰æœ¬åœ°æ²¡æœ‰çš„æ›´æ”¹
**è§£å†³ï¼š** å…ˆ `git pull --rebase`ï¼Œå† `git push`

## ğŸ” éªŒè¯ DNS é…ç½®

### Windows:
```bash
nslookup yourdomain.com
```

### Linux/Mac:
```bash
dig yourdomain.com
```

åº”è¯¥çœ‹åˆ°æŒ‡å‘ GitHub Pages çš„ IP åœ°å€ã€‚

## ğŸ’¡ æç¤º

### DNS ç”Ÿæ•ˆæ—¶é—´
- å›½å†…åŸŸåï¼šé€šå¸¸ 10 åˆ†é’Ÿåˆ° 2 å°æ—¶
- å›½å¤–åŸŸåï¼šé€šå¸¸ 24-48 å°æ—¶
- ä½¿ç”¨ Cloudflareï¼šé€šå¸¸å‡ åˆ†é’Ÿ

### åŠ é€Ÿ DNS ç”Ÿæ•ˆ
1. æ¸…é™¤æœ¬åœ° DNS ç¼“å­˜
   - Windows: `ipconfig /flushdns`
   - Mac: `sudo dscacheutil -flushcache`
   - Linux: `sudo systemd-resolve --flush-caches`

2. ä½¿ç”¨æ— ç—•æ¨¡å¼è®¿é—®ç½‘ç«™

3. ä½¿ç”¨åœ¨çº¿ DNS æ£€æŸ¥å·¥å…·

## ğŸ‰ å®Œæˆå

é…ç½®å®Œæˆåï¼Œä½ çš„ç½‘ç«™å°†ï¼š
- âœ… ä½¿ç”¨ä½ çš„è‡ªå®šä¹‰åŸŸå
- âœ… è‡ªåŠ¨å¯ç”¨ HTTPS
- âœ… æ ·å¼å’ŒåŠŸèƒ½æ­£å¸¸
- âœ… å…¨çƒè®¿é—®é€Ÿåº¦å¿«

## ğŸ“š ç›¸å…³èµ„æº

- [GitHub Pages è‡ªå®šä¹‰åŸŸåæ–‡æ¡£](https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site)
- [DNS é…ç½®æŒ‡å—](https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site)
